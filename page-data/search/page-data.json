{"componentChunkName":"component---src-pages-search-tsx","path":"/search/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"rawMarkdownBody":"\n## React.js의 Hook에 대해서 학습 및 사용법\n\n---\n\n- 학습의 경우 공식 홈페이지를 참고하여 진행([**공식홈페이지**](https://ko.reactjs.org/docs/hooks-intro.html)).\n- React 버전 16.8.0이상, React Native 0.59이상에서 지원\n\n### 등장 배경\n\n- 기존 React에서 state를 사용하기 위해서는 class형태에서 React.component를 상속하여 사용\n- 상속 없이 import 방식으로 Function이나 const같은 함수에서 state 사용할 수 있도록 지원하는 개념\n- 함수 컴포넌트에서 React state와 생명주기 기능(lifecycle features)을 “연동(hook into)“할 수 있게 해주는 함수.\n\n### 개념\n\n- state를 사용하기 위해 class를 사용하는데 이를 대체하여 class가 아니여도 state관리 및 rife-cycle사용이 가능하게 해주는 API\n- 좀 더 재사용 가능한 컴포넌트를 작성하는데 도움을 주기 위해 나옴\n- class안에서는 동작하지 않음\n\n### 문법\n\n- 중복하여 사용 가능(state, effect 동일)\n\n1.  State Hook\n\n    - state를 대체하는 개념으로 useState를 react로 부터 import하여 사용\n\n    - useState는 2개의 항목을 가지는 배열을 반환. 인자로 주는 값의 경우 초기 변수 값을 나타낸다.\n\n      > 💡 return [현재 변수값, 변수를 바꾸는 setter 함수];\n\n      <details>\n      <summary>사용 예시</summary>\n\n      ```javascript\n      import React, { useState } from 'react'; //useState가 hook\n\n      function Example() {\n        // \"count\"라는 새 상태 변수를 선언합니다\n        const [count, setCount] = useState(0); //useState는 중복하여 호출가능(각자 독립된 state를 가짐)\n        const [fruit, setFruit] = useState('banana');\n        const [todos, setTodos] = useState([{ text: 'Learn Hooks' }]);\n\n        return (\n          <div>\n            <p>You clicked {count} times</p>\n            <button onClick={() => setCount(count + 1)}>Click me</button>\n          </div>\n        );\n      }\n      ```\n\n      </details>\n\n2.  Effect Hook\n\n    - 'Data를 가져와 DOM을 수정하는 작업'을 'side effects' or 'effects'라고 한다. 이러한 작업들을 함수 컴포넌트에서 Hook을 사용해서 수행 가능하도록 하는 것을 말한다.\n\n    - class의 생명주기 함수에서 제공되는 부분들에 대해서 제공하는 것(componentDidMount, componentDidUpdate, componentWillUnmount를 대체)\n\n    - props, state에 접근이 가능하며, 매 랜더링 후 실행 됨(최초 로딩 포함)\n\n    - 기존 class 구조에서는 생명주기 메서드 각각에 로직을 작성했으나 Effect Hook에서는 한 곳에서 로직관리 가능\n\n      <details>\n      <summary>사용 예시</summary>\n\n      ```javascript\n      import React, { useState, useEffect } from 'react';\n\n      function Example() {\n        const [count, setCount] = useState(0);\n\n        // componentDidMount, componentDidUpdate와 비슷합니다\n        useEffect(() => {\n          // 브라우저 API를 이용해 문서의 타이틀을 업데이트합니다\n          document.title = `You clicked ${count} times`; //DidMount, DidUpdate를 대체\n\n          return () => {\n            //willUnmount를 대체\n            //cdoe...\n          };\n        });\n\n        return (\n          <div>\n            <p>You clicked {count} times</p>\n            <button onClick={() => setCount(count + 1)}>Click me</button>\n          </div>\n        );\n      }\n      ```\n\n      </details>\n\n    - 구독을 계속 갱신,취소하는데 이는 과도한 비용을 초래합니다. 이를 방지하고자 값이 변경 됬을 때만 새로운 구독을 생성하면 되는데 useEffect 두 번째 인자를 전달하여 사용할 것(props.source)\n\n      ```javascript\n      useEffect(\n        () => {\n          const subscription = props.source.subscribe();\n          return () => {\n            subscription.unsubscribe();\n          };\n        },\n        [props.source] //Option : [] 값 입력 시 DidMount/WillUnmount효과, 값이 있는 경우 변경 된 경우에만 코드 수행\n      );\n      ```\n\n3.  Context Hook\n\n    - context 객체(React.createContext에서 반환된 값)을 받아 그 context의 현재 값을 반환합니다. context의 현재 값은 트리 안에서 이 Hook을 호출하는 컴포넌트에 가장 가까이에 있는 <MyContext.Provider>의 value prop에 의해 결정됩니다.\n    - react.js의 context를 hook API화 시킨 개념\n\n      **Context란?**\n\n      - 하위 컴포넌트에 값을 전달하기 위해서는 props를 사용하여 넘겨주어야 하는데, 이를 사용하지 않고 값을 전달 가능하게 하는 기능\n      - 전역변수를 사용하는것과 비슷하지만, JS의 클로저를 활용하는 개념과 유사하다고 본다.\n      - 만약 상위에 Context가 있고 하위에서 Context를 선언할 시 하위의 Context를 참조함\n      - Context를 사용 시 따로 지정된 context를 참조하는게 아니라 문맥상 가장 가까운 위치의 context를 참조하기 때문에 만약, 하위에서 context를 사용 시 이를 참조하게 된다.\n\n      <details>\n      <summary>사용 예시</summary>\n\n      ```javascript\n      //React.createContext(Context 생성)\n      const MyContext = React.createContext(defaultValue); //defaultValue : Provider를 찾지 못하였을 때 사용\n\n      //Context.Provider : Notiy역활 수행\n      <MyContext.Provider value={/* 어떤 값 */}/>; //value가 변경된 것을 알리는 역활(re-rendering 수행)\n\n      //Context.Consumer : 구독 역활 수행\n      <MyContext.Consumer>\n        {value => /* context 값을 이용한 렌더링 */} //value를 구독\n      </MyContext.Consumer>\n      ```\n\n      </details>\n\n4.  Custom Hook\n\n    - 상태관련 Logic을 컴포넌트 간 재사용하고 싶은데 고전적인 방식으로는 higher-order components와 render props 2가지 방식을 사용\n    - Custom Hook은 이를 대체\n    - 이름의 경우 'useOOO'과 같이 앞에 use를 붙여서 사용 시 linter 플러그인 사용 시 버그를 찾아준다.\n\n      <details>\n      <summary>사용 예시</summary>\n\n      ```javascript\n      import React, { useState, useEffect } from 'react';\n\n      function useFriendStatus(friendID) {\n        const [isOnline, setIsOnline] = useState(null);\n\n        function handleStatusChange(status) {\n          setIsOnline(status.isOnline);\n        }\n\n        useEffect(() => {\n          ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);\n          return () => {\n            ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);\n          };\n        });\n\n        return isOnline;\n      }\n\n      //각 함수에서 독립되게 호출되어 사용됨\n      function FriendStatus(props) {\n        const isOnline = useFriendStatus(props.friend.id);\n\n        if (isOnline === null) {\n          return 'Loading...';\n        }\n        return isOnline ? 'Online' : 'Offline';\n      }\n\n      function FriendListItem(props) {\n        const isOnline = useFriendStatus(props.friend.id);\n\n        return <li style={{ color: isOnline ? 'green' : 'black' }}>{props.friend.name}</li>;\n      }\n      ```\n\n      </details>\n\n### 규칙\n\n1. 최상위 에서만 호출해야함. 반복문, 조건문, 중첩된 함수에서는 사용 X\n\n   - useState, useEffect가 여러번 호출되어 Hook보장을 위해서 최상위에서만 쓰라는 것\n\n   - 작성한 순서대로 react는 읽어들임(순서보장)\n\n2. Custom Hook이 아닌 이상, React 함수 컴포넌트에서만 호출할 것\n\n### 기타\n\n1. useEffect vs useLayoutEffect\n   - useEffect는 브라우저 화면이 다 그려질때 까지 지연, 다음 렌더링이 발생하기 전에 발생하는 것을 보장. 레이아웃 배치&그리기 완료 후 발생\n   - 이를 대체하기 위해 useLayoutEffect가 존재, 이는 모든 DOM변경 후 동기적으로 발생. 브라우저가 화면 그리기 이전에 동기적으로 발생\n     - componentDidMount나 componentDidUpdate와 동일한 단계를 실행하게 된다는 것에 주의\n   - 먼저 useEffect사용 후 문제 시 useLayoutEffect 사용할 것, 서버 렌더링 단계에서는 모든 js다운 전까지 둘다 실행 되지 않는다.\n     - UI가 깨져보일 수 있는 것들은 조건부 렌더링이나 노출 지연할 것\n","excerpt":"React.js의 Hook에 대해서 학습 및 사용법 학습의 경우 공식 홈페이지를 참고하여 진행(공식홈페이지). React 버전 16.8.0이상, React Native 0.59이상에서 지원 등장 배경 기존 React에서 state…","fields":{"slug":"/React js Hook/"},"frontmatter":{"date":"Mar 06, 2020","title":"React.js Hook","tags":["React.js","Hook"]}}},{"node":{"rawMarkdownBody":"\n## JSP에서 Github autopush 환경 만들기\n\n### 개발환경\n\n- Server : Tomcat8\n- OS : window10\n\n### 구현\n\n- DB에 Data가 갱신될 때 마다 Github 저장소에 auto push 기능을 구현하고자 하였다.\n- 이를 위해서 우선적으로 bat파일을 만들어 jsp환경에서 성공적으로 DB에 Update 시 실행하도록 하였다.\n\n  <details>\n  <summary>batch 파일 코드</summary>\n\n  ```Shell\n    F: #batch파일이 존재하는 드라이브 위치\n    cd 'batch가 위치할 폴더 경로' #batch 파일이 위치 할 폴더 경로\n    git add . #git에 변경된 사항에 대해서 스테이징 한다.\n    git commit -m \"auto push(file upload)\" #commit실행\n    git push origin master #git 저장소에 push\n  ```\n\n</details>\n\n- jsp에서 Runtime의 exec함수를 사용하여 batch파일을 실행하도록 코드를 작성하였다.\n\n  ```java\n  <%@ page import=\"java.lang.Runtime\"%> //Runtime import\n\n  Process process = Runtime.getRuntime().exec(\"파일경로\");\n  process.waitFor(); //batch파일이 실행되기 까지 대기\n\n  //Option : 실행 결과에대해서 알고 싶은 경우 구현\n  BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));\n\n  String line = null;\n\n  while((line = br.readLine()) != null){\n      out.println(line);\n  }\n  br.close();\n  //Option 끝\n\n  process.destroy(); //완료된 프로세스 제거\n  ```\n\n### 이슈\n\n- batch파일을 터미널에서 실행 시 정상적으로 수행되었으나 jsp코드 상 실행 시 무한 loop가 걸리는 문제가 존재하였다. 이에 대하여 line별 실행 해본 결과 push과정에서 문제가 발생하였다.\n- 이와 관련된 문제를 찾아본 결과 권한 문제. 즉, 로그인 문제인걸로 방향을 잡고 SSH keys를 발급하여 GitHub 계정에 등록하였다. 그러나 문제가 해결되지 않았다.\n- 이와 관련된, 문제에 대해서 찾아도 나오지 않아 프로젝트 문제인걸로 방향을 잡고 새로운 저장소를 생성하여 실행하였으나 결과는 같았다. 그때, 실수로 branch를 새로 생성하였는데 이 후로 push 실행 시 수행되는 것을 확인하였다!😮\n- SSH Keys를 발급 후 push를 수행한 경우 자동적으로 권한 취득이 되어 아이디/패스워드 미입력이 되는줄 알았는데 아니었나보다...\n- 만약, 이와 같은 증상을 겪는사람이 있다면 SSH Keys등록 후 브랜치를 하나 생성해보길 바란다.\n\n### 참고 사이트\n\n- [Pushing to Git returning Error Code 403 fatal: HTTP request failed](https://stackoverflow.com/questions/7438313/pushing-to-git-returning-error-code-403-fatal-http-request-failed)\n","excerpt":"JSP에서 Github autopush 환경 만들기 개발환경 Server : Tomcat8 OS : window10 구현 DB에 Data가 갱신될 때 마다 Github 저장소에 auto push 기능을 구현하고자 하였다. 이를 위해서 우선적으로 bat…","fields":{"slug":"/JSP batch/"},"frontmatter":{"date":"Mar 04, 2020","title":"JSP에서 batch 실행하기","tags":["JSP","batch","github","autopush"]}}},{"node":{"rawMarkdownBody":"\n## split()함수에 Regex를 사용 시 \"\"값이 return되지 않는 문제\n\n고객이 네트워크 속도 문제로 인해 필요없는 파일을 load하지 않기로 하였다. 이에 대해서 특정 js파일을 load제외하였는데 그로인해 IE8에서 textsize를 계산할 때 다른점이 발견되었다. 이러한 부분을 조사 중 IE8에서 split()에 정규식 공백문자(\" \")를 사용 시 반환되는 배열에 empty string(\"\")값이 제외되는 문제가 발생하였다.\n\n<details>\n<summary>💡 String.split() syntax</summary>\n\n```javascript\nString.split([separator[, limit]])\nseparator : 끊을 문자 or 정규식\nlimit : 몇 개 까지 자를 지에 대한 숫자\n```\n\n</details>\n\n만약 \" ab c d e fg 123 \"와 같은 문자열이 있다고 하자. 이 문자열에 대하여 \" \" 공백문자를 기준으로 자르고자 한다. 그렇다면 split()함수에 \" \"공백을 인자로 사용 시 \"\"을 포함한 배열이 반환 될 것이다. 근데, 만약 정규식을 사용 한다면 어떻게 될까?\n\n보통 정규식을 사용 시 다음과 같이 사용을 할 것이다\n\n```javascript\nvar reg = /abc/;\nvar reg = new RegExp('abc');\n```\n\n두 방식의 차이는 컴파일 시점의 차이로 첫 번째 방식의 경우 스크립트가 load되는 시점에 컴파일 되며 두 번째의 경우는 정규식이 실행되는 시점에 컴파일 된다. 만약, 상수와 같이 고정된 조건에 대해서 사용하는 경우 첫 번째 방식을 사용하며, 조건이 변경되는 경우는 두 번째 방식을 사용하면 될 것이다.\n\n### 테스트\n\n실행결과의 경우 아래에서 확인 가능하며, 해당 파일은 GitHub 저장소에 업로드되어있다.([**저장소**](https://github.com/AnGwangHo/sampleFile))\n\n<iframe width=\"100%\" height=\"300\" src=\"https://angwangho.github.io/sampleFile/window_method/split.html\" frameborder=\"0\" allowfullscreen=\"\"></iframe>\n\n위 샘플에서 확인하였듯이 split()에 정규식을 사용하게 된다면 아래와 같이 empty stirng이 제외된 결과가 나올 것이다.\n\n```javascript\n//IE8 이하\n'   ab c d e   fg 123   '.split(' '); //[\"\", \"\", \"\", \"ab\", \"c\", \"d\", \"e\", \"\", \"\", \"fg\", \"123\", \"\", \"\", \"\"]\n'   ab c d e   fg 123   '.split(/\\s/); //[\"ab\", \"c\", \"d\", \"e\", \"fg\", \"123\"]\n```\n\n위 방식의 경우 동일하게 스페이스 문자를 기준으로 자르도록 하였다. 그러나 결과는 다르게 발생되었다. 문자열로 공백 문자를 인자로 준 경우 empty string값이 포함되어 배열이 반환되었으나 정규식을 사용한 경우 \"\"인 값들이 제외되고 배열이 반환되었다. 이를 해결하고자 다음과 같은 방안을 세우고 시도를 해보았다.\n\n### 해결방안\n\n1. ~~new RegExp(\"\\\\s\")를 사용~~\n   - \"\"값이 제외되어 반환\n2. ~~정규식 문법을 수정~~\n   - 다양한 방법으로 조건을 변경하였으나 \"\"값이 제외되어 반환되었다.  \n     ex) /(\\s)/, /[\\s\\xA0]/, / /g, /[ \\f\\n\\r\\t\\v]/, /\\u0020/(공백문자 유니코드)\n\n위와 같은 해결방안을 세우고 시도하였으나 \"\"값이 제외되고 반환되었다. 따로 해결이 가능한 부분이 없었으며 다음과 같은 결론을 내렸다.\n\n### 처리결과\n\n우선적으로 고객이 제외한 js파일에서 String.split함수에 대해서 오버라이딩이 되어있어 IE8이하에서 split(/\\s/)시 \"\"값이 포함된 배열이 반환되었다. 이러한 부분에 대해서 고객에게 split함수에 대해서 오버라이딩된 코드를 적용하도록 가이드하였다. 만약, 외부에서 IE8이하 브라우저를 지원해야하는 경우가 존재한다면 아래의 코드를 적용하면 된다.\n\n<details><summary>코드</summary>\n\n```javascript\n/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nvar split;\n\n// Avoid running twice; that would break the `nativeSplit` reference\nsplit =\n  split ||\n  (function(undef) {\n    var nativeSplit = String.prototype.split,\n      compliantExecNpcg = /()??/.exec('')[1] === undef, // NPCG: nonparticipating capturing group\n      self;\n\n    self = function(str, separator, limit) {\n      // If `separator` is not a regex, use `nativeSplit`\n      if (Object.prototype.toString.call(separator) !== '[object RegExp]') {\n        return nativeSplit.call(str, separator, limit);\n      }\n      var output = [],\n        flags =\n          (separator.ignoreCase ? 'i' : '') +\n          (separator.multiline ? 'm' : '') +\n          (separator.extended ? 'x' : '') + // Proposed for ES6\n          (separator.sticky ? 'y' : ''), // Firefox 3+\n        lastLastIndex = 0,\n        // Make `global` and avoid `lastIndex` issues by working with a copy\n        separator = new RegExp(separator.source, flags + 'g'),\n        separator2,\n        match,\n        lastIndex,\n        lastLength;\n      str += ''; // Type-convert\n      if (!compliantExecNpcg) {\n        // Doesn't need flags gy, but they don't hurt\n        separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n      }\n      /* Values for `limit`, per the spec:\n       * If undefined: 4294967295 // Math.pow(2, 32) - 1\n       * If 0, Infinity, or NaN: 0\n       * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n       * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n       * If other: Type-convert, then use the above rules\n       */\n      limit =\n        limit === undef\n          ? -1 >>> 0 // Math.pow(2, 32) - 1\n          : limit >>> 0; // ToUint32(limit)\n      while ((match = separator.exec(str))) {\n        // `separator.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0].length;\n        if (lastIndex > lastLastIndex) {\n          output.push(str.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for\n          // nonparticipating capturing groups\n          if (!compliantExecNpcg && match.length > 1) {\n            match[0].replace(separator2, function() {\n              for (var i = 1; i < arguments.length - 2; i++) {\n                if (arguments[i] === undef) {\n                  match[i] = undef;\n                }\n              }\n            });\n          }\n          if (match.length > 1 && match.index < str.length) {\n            Array.prototype.push.apply(output, match.slice(1));\n          }\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= limit) {\n            break;\n          }\n        }\n        if (separator.lastIndex === match.index) {\n          separator.lastIndex++; // Avoid an infinite loop\n        }\n      }\n      if (lastLastIndex === str.length) {\n        if (lastLength || !separator.test('')) {\n          output.push('');\n        }\n      } else {\n        output.push(str.slice(lastLastIndex));\n      }\n      return output.length > limit ? output.slice(0, limit) : output;\n    };\n\n    // For convenience\n    String.prototype.split = function(separator, limit) {\n      return self(this, separator, limit);\n    };\n\n    return self;\n  })();\n```\n\n</details>\n\n### 참고자료\n\n1. 정규식 테스트 사이트\n\n   [Non breaking space - Regex Tester/Debugger](https://www.regextester.com/105851)\n\n2. MS 공식 사이트\n\n   [Regular Expression Syntax (Scripting)](<https://docs.microsoft.com/en-us/previous-versions//1400241x(v=vs.85)?redirectedfrom=MSDN>)\n\n3. split 함수 재정의코드\n\n   [JavaScript split Bugs: Fixed!](http://blog.stevenlevithan.com/archives/cross-browser-split)\n","excerpt":"split()함수에 Regex를 사용 시 \"\"값이 return되지 않는 문제 고객이 네트워크 속도 문제로 인해 필요없는 파일을 load하지 않기로 하였다. 이에 대해서 특정 js파일을 load제외하였는데 그로인해 IE8에서 textsize…","fields":{"slug":"/IE8-Split-Bug/"},"frontmatter":{"date":"Mar 03, 2020","title":"IE8 Split Bug","tags":["IE","Split","Browser Bug"]}}}]}},"pageContext":{}}}