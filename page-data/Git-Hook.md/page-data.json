{"componentChunkName":"component---src-templates-post-tsx","path":"/Git-Hook.md/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"reactjs에-husky를-사용하여-git-hook-적용하기\" style=\"position:relative;\"><a href=\"#reactjs%EC%97%90-husky%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-git-hook-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"reactjs에 husky를 사용하여 git hook 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React.js에 husky를 사용하여 Git Hook 적용하기</h2>\n<hr>\n<p>기존의 git hook의 경우 shell 방식으로 사용하였다. 이러한 방식은 shell 관련된 코드를 작성해야하는데 이와 관련된 자료나 학습에 많은 시간이 소요된다. 이러한 부분을 도와주는 라이브러리를 검색하다가 husky라는 라이브러리를 찾았으며, package.json에 설정만 추가하면 쉽고 빠르게 git hook기능을 사용할 수 있다.</p>\n<h3 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h3>\n<ul>\n<li>현재 React.js+typescript 프로젝트가 npx cra를 사용하여 생성되어있으며, 이를 기준으로 진행한다.</li>\n<li>\n<p>아래 명령어를 입력하여 현재 프로젝트에 husky 라이브러리를 개발용으로 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> husky --save-dev</code></pre></div>\n</li>\n</ul>\n<h3 id=\"설정\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95\" aria-label=\"설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정</h3>\n<p>현재, husky라이브러리가 설치 되었고 git hook기능을 사용하여 commit 수행 전 자동 test를 실행하고자 한다. 이러한 실행동작을 위해서는 package.json에 설정이 필요하며 아래 코드를 참조하여 추가하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  ...<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"test:watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test --watchAll=false\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//test관련 추가</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n...<span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"husky\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"hooks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"pre-commit\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run test:watch\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//commit 전에 해야할 동작을 정의한다.</span>\n    <span class=\"token comment\">// </span><span class=\"token property\">\"pre-push\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"명령어\"</span> 추가적인 행동설정 가능\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>위에서 test:watch의 경우 기존 test동작 시 테스트 이후 동작에 대해서 키 입력을 해야한다. 우리가 하고자 하는 것은 단순히 test 결과에 대하여 true/false동작만을 필요로한다.</li>\n<li>이를 위해서 test시 모든 test에 대해서 수행되도록 —watchAll option을 주었고 =fasle를 하여 단순히 true/false결과만 받도록 하였다.</li>\n<li>husky에는 hooks에 대해서 해야할 동작을 정의하였고 commit전에 test를 수행하도록 하였다.</li>\n</ul>\n<h3 id=\"결과-동작\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC-%EB%8F%99%EC%9E%91\" aria-label=\"결과 동작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과 동작</h3>\n<ul>\n<li>\n<p>일부러 App.tsx에 test시 실패가 되도록 코드를 수정하였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 534px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d317fa03c4b24e5c65cb0ccfaf6be4b8/ecefd/image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.558052434456926%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABz0lEQVQoz4VS23KiQBTkS8IGFBQvQa5yE5AAWSLoulsVV1/0yf//gs6cQ6ikandrH7pmzlz69PS0ZBgzrFYWHMdFEISwbQeu62E0GiMMI9D+05MJ01zx2ny+gKqOeK9pGjw+Krw2Hmu8L30l9DyfCQmKonI9mUwxm82ZlC7QKMvfsN0WeHs74eFBhqbpvEekEhW6/rkwgIh0fYLp1GBQTc2HBpqmsVKa0zqdZYWO4+B0OuF+v+N8PuN6veJ2u+FyuSDLMiRJ8ldsNhtGHMdI0xSWZXEDabFYCvlb5HnOHtIBOjgcMk2TPfW8f4NEkVJWSE8m0r5jKoi3bHiW5YiimJuRBdSdLgwYavKaRBAxfRArDNYB9t0eVfWCToxEutu1eH6ucDz+FL4ZwrMJ+0RjP5/yZ6jqGFleIIySXmHgb2CFBcy4Rrc74ntzwOvrD6HshWHbIXxxxvfTj7FH1/1CXbXiNQXqokApRDhuAslauXDWCbwoR103IludUFiKZ2QM2/ZFVBzh5SeoDoIE63XM8zRJEYcJlksbEsWgKkv8Fj+9PxxwEKBsKYrC6L36E+SdqqqcybZtUQoOWZYhkeF9FvvMUaa+5vF/IN+Mj5zS/B2qbl+nvqznbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"commit수행\"\n        src=\"/static/d317fa03c4b24e5c65cb0ccfaf6be4b8/ecefd/image1.png\"\n        srcset=\"/static/d317fa03c4b24e5c65cb0ccfaf6be4b8/00d96/image1.png 148w,\n/static/d317fa03c4b24e5c65cb0ccfaf6be4b8/0b23c/image1.png 295w,\n/static/d317fa03c4b24e5c65cb0ccfaf6be4b8/ecefd/image1.png 534w\"\n        sizes=\"(max-width: 534px) 100vw, 534px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>이러한 상태에서 commit시 다음과 같은 alert창이 발생되고 commit이 실패함을 알 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4e0f260d054c619c92ce3f20dba46dc6/407ec/image2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.56481481481482%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABgUlEQVQoz12QSY7TQBSGfRGG4Nkuz3a5m6AoisAZ5Ch26A2CliIUJFYoEn0CVtyBG7R6y6bXwA3Yc5OPqqK7Fyw+vane8Jd11krStCDLSqRsKMuSoigMbduaWFPXNU3TkOf6bf6Qv69ptG8FQcLhcsPFbo5je2w2G7bbLeM40nUdfd+zXq8Zh1H5//K73cBqtWYYBpbLJUmSKFLCMMJqm5o/v17z/foNjpA0VWG2SSnvrpLmMn2ttiaWLVXdqLqkqmqlMFdkBEGAdXp/zu8bn4/fvpJdHEncCUJti+MYIYSxYRjieZ5piKIIEbpE3lPFxCD8CakI8X01UNYFZ01LLmckVasK8Z2ExAzMsozpdMpisWA2mykFJfF5T7X6QNUdaJYHiu6IkC/xPQerUA1ZmpAnsUKo09MH9EAte7/fczweefvuksX8BW7/hedXP5mebpl/vqU+/SB49YnAfYIVKhn3aEm+7/+Hh+M42LZtrJbuq2/xnj1SPMZVaD/wbGxV/wvZN+kfOCux9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"commit실패\"\n        src=\"/static/4e0f260d054c619c92ce3f20dba46dc6/799d3/image2.png\"\n        srcset=\"/static/4e0f260d054c619c92ce3f20dba46dc6/00d96/image2.png 148w,\n/static/4e0f260d054c619c92ce3f20dba46dc6/0b23c/image2.png 295w,\n/static/4e0f260d054c619c92ce3f20dba46dc6/799d3/image2.png 590w,\n/static/4e0f260d054c619c92ce3f20dba46dc6/407ec/image2.png 864w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li><a href=\"https://velog.io/@jch9537/React-husky-%EC%82%AC%EC%9A%A9%EB%B2%95-1kk4wj5og4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[React] husky 사용법</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39724017/running-cra-jest-in-non-interactive-mode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jest test 결과만 나오도록 하는 방법</a></li>\n</ul>","excerpt":"React.js에 husky를 사용하여 Git Hook 적용하기 기존의 git hook의 경우 shell 방식으로 사용하였다. 이러한 방식은 shell…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/Git-Hook.md/#reactjs%EC%97%90-husky%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-git-hook-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">React.js에 husky를 사용하여 Git Hook 적용하기</a></p>\n<ul>\n<li><a href=\"/Git-Hook.md/#%EC%84%A4%EC%B9%98\">설치</a></li>\n<li><a href=\"/Git-Hook.md/#%EC%84%A4%EC%A0%95\">설정</a></li>\n<li><a href=\"/Git-Hook.md/#%EA%B2%B0%EA%B3%BC-%EB%8F%99%EC%9E%91\">결과 동작</a></li>\n<li><a href=\"/Git-Hook.md/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/Git-Hook.md/"},"frontmatter":{"title":"Git Hook 사용하기","date":"Mar 25, 2020","tags":["Git","Git Hook"],"keywords":["Git","Git Hook","husky"]}}},"pageContext":{"slug":"/Git-Hook.md/","series":[]}}}