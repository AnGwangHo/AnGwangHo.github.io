{"componentChunkName":"component---src-templates-post-tsx","path":"/React-CICD.md/","result":{"data":{"markdownRemark":{"html":"<h2 id=\"github-action--docker--gke를-사용하여-클라우드-배포하기\" style=\"position:relative;\"><a href=\"#github-action--docker--gke%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"github action  docker  gke를 사용하여 클라우드 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github action + Docker + GKE를 사용하여 클라우드 배포하기</h2>\n<p>현재 진행하고 있는 동아리 활동에서 프로젝트 초기환경 구축을 하게 되었다. 이에 대하여 CI/CD를 구축하여 자동 테스트 및 배포를 수행하기로 결정하였다. 또한, 무중단 배포를 하기 위하여 Nginx를 서버로 loadbalancer를 설정하기로 하였다.</p>\n<p>AWS에 관련되어서는 자료가 많이 존재하는데 GCP관련해서는 내가 원하는 형태의 자료가 없어 삽질하는 과정이 많이 생겨 직접 남기고자 작성한다.</p>\n<h3 id=\"사용-기술\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EA%B8%B0%EC%88%A0\" aria-label=\"사용 기술 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용 기술</h3>\n<ul>\n<li>Jest, Git Hook(husky), Github Action, Docker, Google Cloud Platform(Container Registry, Kubernetes Engine)</li>\n</ul>\n<h3 id=\"배포-흐름도\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC-%ED%9D%90%EB%A6%84%EB%8F%84\" aria-label=\"배포 흐름도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배포 흐름도</h3>\n<ol>\n<li>개발자가 git push를 진행 → local에서 Git Hook이 감지하여 unit test 수행 후 결과에 따라 push 진행 및 fail처리</li>\n<li>develop 브랜치에 pull request 발생 시 Github Action을 통해 현재 코드에 대하여 unit test 진행 후 결과를 issue에 보여줌</li>\n<li>master 브랜치에 code merge된 경우 Github Action을 통해 Docker image 생성 후 Google Cloud Platfrom에 upload 및 Kubernetes에 배포</li>\n</ol>\n<h2 id=\"실제로-cicd를-만들어보자\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C%EB%A1%9C-cicd%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\" aria-label=\"실제로 cicd를 만들어보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제로 CI/CD를 만들어보자!</h2>\n<h3 id=\"reactjs-프로젝트-준비하기\" style=\"position:relative;\"><a href=\"#reactjs-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0\" aria-label=\"reactjs 프로젝트 준비하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React.js 프로젝트 준비하기</h3>\n<p>프로젝트의 경우 현재, 동아리에서 사용하기로한 React.js를 기준으로 초기 프로젝트를 구성하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">npx create-react-app <span class=\"token string\">'프로젝트이름'</span> --template typescript</code></pre></div>\n<ul>\n<li>이렇게 생성된 프로젝트에서 <code class=\"language-text\">npm start</code>명령어를 실행하여 프로젝트 환경이 정상적으로 설정된것을 확인한다.</li>\n</ul>\n<h3 id=\"jest-설정하기\" style=\"position:relative;\"><a href=\"#jest-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"jest 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jest 설정하기</h3>\n<p>unit test시 사용할 라이브러리는 <code class=\"language-text\">Jest</code>라는 라이브러리를 사용하기로 하였으며, 해당 라이브러리의 경우 npx로 프로젝트 설치 시 자동적으로 설치된다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">npm run test</code>를 실행한다면 아래와 같은 결과가 나타날 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 417px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6ee49b0ef8f76dd30f4d4159b62ae00/cc55b/test1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.96642685851319%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABb0lEQVQoz3VS2XKCQBDkM6KgBeIBCaeyLMcCcmvy/9/TmV2j0VTloWtnF6ane2Y0zgvEUQTXfYfn+UjTDIyQ8ZxiDs45giDE6cjUt7wowBIGUdbY7nZI6b+mblFXdLdtaL4fwnFcfHieIl0s3rBcLl9gGMYDuq6/nPdYYrVaQcvyEl03oh9GVFUD3/cRxSfEYYQwiJAkCSzTVIkyYb1e/w9JaJoWmqZDlmVEFqCgAs15UG9CCMzThexVYIzsp6lKfFb8t4i23e3Rtj2KosTxlKAoBYZ+RJ4LUt6jFDWGcYZzOGCzsWHbW5ik2P6JJeGdVFm+EQ6kpkIUHanJHNdpRiXONByOhCXozj2m+apaMpHilgqO44TPy5fKMQz9V+GGqsgeSnt5ViriilCLBiMRyymXZLkkB9JJyjPqcQyfJh9HMVwa6LNtTdqS0h3HUVN2XZfuNg5kkTGmTrkeh/1ebYNlWVguFmqqtw3QH3YlvgE+HvO+qtwp3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"초기테스트\"\n        src=\"/static/a6ee49b0ef8f76dd30f4d4159b62ae00/cc55b/test1.png\"\n        srcset=\"/static/a6ee49b0ef8f76dd30f4d4159b62ae00/00d96/test1.png 148w,\n/static/a6ee49b0ef8f76dd30f4d4159b62ae00/0b23c/test1.png 295w,\n/static/a6ee49b0ef8f76dd30f4d4159b62ae00/cc55b/test1.png 417w\"\n        sizes=\"(max-width: 417px) 100vw, 417px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>우리가 필요한 것은 위와같이 추가입력을 통해 테스트하는 것이 아닌 결과에대한 성공/실패가 필요하다.</li>\n<li>\n<p>이에 대하여 <code class=\"language-text\">package.json</code>에 아래 설정을 추가하고 해당 명령어를 실행하면 아래 결과와 같이 성공/실패에 대한 결과만을 보여준다!</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">//package.json</span>\n<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n...<span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"test:watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test --watchAll=false\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 385px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/814750fd5884a91e1ea9f73122ed66ea/56359/test2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.480519480519476%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB9klEQVQoz4VT2W7bMBDURwQ1ZFundV/WRUqWrMtOU7cw0NcC7Usf+iH98umSiYuiSJyHBUVSO5zZ2VWSNAPjDQ5dj5rVaNoGbdui73s668AYQ3c4oKpr5EWOsqrkt8jhnMEwDGw2G2y3W2iaBsU0Tex2Oziu+zcsy4bjOHA9D7Yt7hxYtv38H52L8H0fHt3f9iIsy4ISxTHm84JpnjEMA75cr8SUo2kaYtuCNy3m5STZcNoP04RhHFERU8Y5BSkgdS0piwlLcbYGyijDPk4QhiH9WNIaIM0yuMTMdT0CbaT0vChILsN+v3+RqUmpt5CS9W8z1J+P2HYZfGuHPSWFYYQ0TREGIYIgwGr1Aaqq0rqSq0jWdf3VUPRfF+x+f8fhx1dMhx6nxyd8/HTB8dhjOZ1JOkdZlvRARqVgUpZg8ibg5mEFa60h8gJ4viddE9Jtw0ToB2SKjYD2LpmVEGthxl1AxlvJoGINuraDFwVQAwsaj7EpfLj0iJAv6ig6Yr1ey0QB+hqwcjxOWOZFFtoXbUJGmHUC64nBHAtESUxG1eT0Ilneq58EHKczLp+vOPYjEqqPTpKLukI3DojSRLIQZRDsbszuAs7zGeM0U2M+N7do1pomoSS39RdZ/8Z7oIpozoKSxUiJWuZ5LkdLjJ1L3f+/xPcY/gGm4GMQmLgObwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"테스트결과\"\n        src=\"/static/814750fd5884a91e1ea9f73122ed66ea/56359/test2.png\"\n        srcset=\"/static/814750fd5884a91e1ea9f73122ed66ea/00d96/test2.png 148w,\n/static/814750fd5884a91e1ea9f73122ed66ea/0b23c/test2.png 295w,\n/static/814750fd5884a91e1ea9f73122ed66ea/56359/test2.png 385w\"\n        sizes=\"(max-width: 385px) 100vw, 385px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n<p>자! 이것으로 CI/CD 배포를 위한 프로젝트 기본적인 준비가 끝났다. 다음으로는 CI/CD에 대한 설정을 진행하겠다.</p>\n<h3 id=\"git-hook-설정하기\" style=\"position:relative;\"><a href=\"#git-hook-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"git hook 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Git Hook 설정하기</h3>\n<p>작업자가 코드를 git에 push하기전에 unit test를 local에서 진행하고자 하였고 이에 대하여 Git hook이 지원하는 것을 검색 결과 알 수 있었다.</p>\n<p>그런데 기존 Git hook의 경우 shell 명령어로 작성해야하는 부분이 존재하였고 이에 관련하여 학습하고 진행하기에는 시간이 없어 대체제를 찾는 도중 <code class=\"language-text\">husky</code>라는 라이브러리가 있는것을 알게되었고 <code class=\"language-text\">package.json</code>에 설정만 입력하기만 하면되는 편리함이 존재하여 이를 선택하였다.</p>\n<ul>\n<li>\n<p>아래 명령어를 입력하여 husky를 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> husky --save-dev</code></pre></div>\n</li>\n<li>설치 후 아래와 같이 hook을 사용할 부분과 명령어를 입력해주면 끝이다!🙌</li>\n<li>\n<p>참고로, 위의 Jest에서 --watchAll=false을 설정하지 않으면 test 진행 시 <code class=\"language-text\">무한루프 효과</code>를 얻을 수 있다.(false를 지정하는 부분이 공식문서에 없어서 찾는데 힘들었다...)</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">//package.json</span>\n<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"husky\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"hooks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"pre-push\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm test:watch\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"github-action-설정하기\" style=\"position:relative;\"><a href=\"#github-action-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"github action 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Action 설정하기</h3>\n<p>CI의 경우 처음에는 기존의 jenkins, travis와 같은 유명한 도구들을 고려하였다. 관련되서 많은 레퍼런스나 예제들이 잘 되어있기에 금방 적용할 것 같았다.</p>\n<p>이러한 예제들을 보다가 Github Action이라는 CI를 보게되었는데 GitHub에서 지원해주며 추가적으로 플러그인이나 설정하는 부분이 없이 파일만 생성하면 자동적으로 해주는부분에서 GitHub Action을 선택하였다.</p>\n<ul>\n<li>\n<p>Github Action의 경우 저장소 탭중에 하나로 존재한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/467ca3f6286d2076ed5b9d676cda5c47/6251f/githubaction1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.076923076923077%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAANUlEQVQI1z2KQQ4AIAjD/P9LvRgjMPA2A0YPTZtlTUcn1qTB6bHLolatBsLjW+Tu2Ul+nx8HNBVNRjTNlQ4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"github 탭\"\n        src=\"/static/467ca3f6286d2076ed5b9d676cda5c47/799d3/githubaction1.png\"\n        srcset=\"/static/467ca3f6286d2076ed5b9d676cda5c47/00d96/githubaction1.png 148w,\n/static/467ca3f6286d2076ed5b9d676cda5c47/0b23c/githubaction1.png 295w,\n/static/467ca3f6286d2076ed5b9d676cda5c47/799d3/githubaction1.png 590w,\n/static/467ca3f6286d2076ed5b9d676cda5c47/2a3d6/githubaction1.png 885w,\n/static/467ca3f6286d2076ed5b9d676cda5c47/6251f/githubaction1.png 975w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p><code class=\"language-text\">Actions</code>을 클릭하면 아래와 같은 화면이 나타며 완성된 템플릿을 제공해 주고 있으며, 해당 템플릿을 사용하거나 새로 작성할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/99797fdda0b7c9dc272ba7bb045fd1e6/d750a/githubaction2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.1305057096248%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABYElEQVQoz3WR20oCURiF56bADmalIN1EXRRBz9JF0HsEmjqmaVF0G3hqzCKonqCyB4h6kixoDh5mZs95VrO3JaK5YLE362d//4LN9XoqREmCLMv4FiWIoggpuNuOA9/34Xke859oRk1Fc8t2QAwHOnHgOB44TdMDgAJZabNTUTrsTt3t9tDudNEJbJrWADgKHzZnmiZ0nYAQAk3XQRcQ3YDruhhW/wHGoKPiKIi2MQyDQS3LxpfSAjEJayZJcjBXgrmJ/nLtF+z/35CObMeF641vpbkatP9Pk1pyj09N7CfT4PNF8LkC0tk8kqksrq5vUTg5QyKdxUEmh8zhERIpHsen56z5JCjH54oIhaOIrawivBxHaCGG6bkIdnb3sL65jfmlOGYisSCPYmp2EWsbW/hofQ5+eQz4+vaOi1IFQuMG5ZqAclVATajj+aXJWtbqDeZS9RKVYH73cA9V1SY2/AHU7TLRYScOSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"github action 템플릿\"\n        src=\"/static/99797fdda0b7c9dc272ba7bb045fd1e6/799d3/githubaction2.png\"\n        srcset=\"/static/99797fdda0b7c9dc272ba7bb045fd1e6/00d96/githubaction2.png 148w,\n/static/99797fdda0b7c9dc272ba7bb045fd1e6/0b23c/githubaction2.png 295w,\n/static/99797fdda0b7c9dc272ba7bb045fd1e6/799d3/githubaction2.png 590w,\n/static/99797fdda0b7c9dc272ba7bb045fd1e6/2a3d6/githubaction2.png 885w,\n/static/99797fdda0b7c9dc272ba7bb045fd1e6/ae92f/githubaction2.png 1180w,\n/static/99797fdda0b7c9dc272ba7bb045fd1e6/d750a/githubaction2.png 1226w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>GitHub Actions의 경우 다른 포스트에서 다루기로하고 프로젝트 루트에서 <code class=\"language-text\">.github/workflows</code> 경로에 아래 파일을 생성해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">#pr-test.yml</span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> PR Test\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>opened<span class=\"token punctuation\">,</span> reopened<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> develop<span class=\"token punctuation\">,</span> feature<span class=\"token punctuation\">,</span> release <span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\nRun Jest<span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>ubuntu<span class=\"token punctuation\">-</span>latest<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>12.x<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> npm install\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> run test code\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run test<span class=\"token punctuation\">:</span>watch\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> if fail\n    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/github<span class=\"token punctuation\">-</span>script@0.8.0\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">github-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.token <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        const ref = \"${{github.ref}}\"\n        const pull_number = Number(ref.split(\"/\")[2])\n        await github.pulls.createReview({\n          ...context.repo,\n          pull_number,\n          body:\"테스트코드를 다시 확인해주세요. \",\n          event:\"REQUEST_CHANGES\"\n        })\n        await github.pulls.update({\n          ...context.repo,\n          pull_number,\n          state:\"closed\"\n        })</span>\n    <span class=\"token key atrule\">if</span><span class=\"token punctuation\">:</span> failure()</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">#google.yml</span>\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and Deploy to GKE\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>closed<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> master\n\n<span class=\"token comment\"># Environment variables available to all jobs and steps in this workflow</span>\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">GKE_PROJECT</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_PROJECT <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">GKE_EMAIL</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_EMAIL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">GITHUB_SHA</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> github.sha <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">GKE_ZONE</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_ZONE <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">GKE_CLUSTER</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_CLUSTER <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">IMAGE</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.IMAGE <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">REGISTRY_HOSTNAME</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.REGISTRY_HOSTNAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token key atrule\">DEPLOYMENT_NAME</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.DEPLOYMENT_NAME <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">setup-build-publish-deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup<span class=\"token punctuation\">,</span> Build<span class=\"token punctuation\">,</span> Publish<span class=\"token punctuation\">,</span> and Deploy\n  <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n  <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\n    <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n\n  <span class=\"token comment\"># Setup gcloud CLI</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> GoogleCloudPlatform/github<span class=\"token punctuation\">-</span>actions/setup<span class=\"token punctuation\">-</span>gcloud@master\n    <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'285.0.0'</span>\n      <span class=\"token key atrule\">project_id</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GCP_PROJECT_ID <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">service_account_email</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_EMAIL <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">service_account_key</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GKE_KEY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># Configure docker to use the gcloud command-line tool as a credential helper</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      gcloud auth configure-docker</span>\n\n  <span class=\"token comment\"># Build the Docker image</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      docker build -t \"$REGISTRY_HOSTNAME\"/\"$GKE_PROJECT\"/\"$IMAGE\":\"$GITHUB_SHA\" \\\n        --build-arg GITHUB_SHA=\"$GITHUB_SHA\" \\\n        --build-arg GITHUB_REF=\"$GITHUB_REF\" .</span>\n  <span class=\"token comment\"># Push the Docker image to Google Container Registry</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Publish\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      docker push $REGISTRY_HOSTNAME/$GKE_PROJECT/$IMAGE:$GITHUB_SHA</span>\n\n  <span class=\"token comment\"># Set up kustomize</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up Kustomize\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      curl -o kustomize --location https://github.com/kubernetes-sigs/kustomize/releases/download/v3.1.0/kustomize_3.1.0_linux_amd64\n      chmod u+x ./kustomize</span>\n  <span class=\"token comment\"># Deploy the Docker image to the GKE cluster</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Deploy\n    <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      gcloud container clusters get-credentials $GKE_CLUSTER --zone $GKE_ZONE --project $GKE_PROJECT\n      ./kustomize edit set image $REGISTRY_HOSTNAME/$GKE_PROJECT/$IMAGE:${GITHUB_SHA}\n      ./kustomize build . | kubectl apply -f -\n      kubectl rollout status deployment/$DEPLOYMENT_NAME\n      kubectl get services -o wide</span></code></pre></div>\n</li>\n<li><code class=\"language-text\">google.yml</code>의 경우 이후 GKE배포 단계에서 설명하기로 하며, <code class=\"language-text\">pr-test.yml</code>를 보면 develop, feature, release 브랜치에 pull request가 발생 시 issue가 'opened, reopened'시점에 수행되며 해당 코드에대하여 test 후 실패 시 issue에 리뷰를 달게한다.</li>\n<li>\n<p>이제, 해당 파일을 git에 반영 시 브랜치에 pull request시 수행되며 결과를 Action탭에서 볼 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e3cc9113fd9cec23ed455bcc5bc2a17/a781d/githubaction3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.776637726913975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABWUlEQVQoz41Sy04DMQzc//8LTvABSMABOIJ64Npz7202Je/XDuNsd9tKrUQky01jj2fGOxjjkHNFmwDjCkIs0FozR0zTdDdqZU9rkCM5pYyUMwbUAFTPvzOWE/lonYcPkUWFxWXOpygEM9bB+YhKsBAT9krjMB4xfP4ovHzve7xujtjuAgEjlP5lk2dTgGWESAaldkBPFZm/8+kugPOghuH5S+PpQ+HxXeHhbY/N1lEOJx5Ul1EKmylFZHZ5zC62VbocHziUjOU+4MYR/6wTb0v3JaV09otNKU9XgJH1UtMBa51I9RzSF/l4UCMl284y0ksBlAYBNJ6+pbYCBr5LXDG8nJg4ceSmRUqlLyK7yWeAucaGhphbv88M0z8AR919kWLvZ+ClLhAsl2sPA+MuYD4BzkB1ZbhIPtrKTV8yjH241NwGpG/G2D5VNiwsFw8lRG6ul0tJ61L+ADP+DfuXzU40AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"github action결과\"\n        src=\"/static/9e3cc9113fd9cec23ed455bcc5bc2a17/799d3/githubaction3.png\"\n        srcset=\"/static/9e3cc9113fd9cec23ed455bcc5bc2a17/00d96/githubaction3.png 148w,\n/static/9e3cc9113fd9cec23ed455bcc5bc2a17/0b23c/githubaction3.png 295w,\n/static/9e3cc9113fd9cec23ed455bcc5bc2a17/799d3/githubaction3.png 590w,\n/static/9e3cc9113fd9cec23ed455bcc5bc2a17/2a3d6/githubaction3.png 885w,\n/static/9e3cc9113fd9cec23ed455bcc5bc2a17/ae92f/githubaction3.png 1180w,\n/static/9e3cc9113fd9cec23ed455bcc5bc2a17/a781d/githubaction3.png 1267w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ul>\n<h3 id=\"클라우드에-배포하기\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"클라우드에 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드에 배포하기</h3>\n<p>이제, 마지막단계로 프로젝트를 build후 Docker image를 만들어 클라우드에서 실행 할 것이다.</p>\n<ol>\n<li>\n<p>Docker관련 설정파일 생성</p>\n<ul>\n<li>Docker의 경우 가상환경에서 실행 되므로 현재 local에 Docker를 설치할 필요는 없다.</li>\n<li><code class=\"language-text\">.dockerignore</code>, <code class=\"language-text\">Dockerfile</code> 총 2개의 파일을 프로젝트 루트에서 생성한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\">#.dockerignore</span>\n.git\n.hg\n.svn\n.dockerignore\n\nnode_modules\nDockerfile\nnpm<span class=\"token punctuation\">-</span>debug.log</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token comment\">#Dockerfile</span>\n<span class=\"token keyword\">FROM</span> node<span class=\"token punctuation\">:</span>12 as builder\n\n<span class=\"token keyword\">WORKDIR</span> /\n\n<span class=\"token keyword\">COPY</span> package.json ./\n<span class=\"token keyword\">RUN</span> npm install <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>silent\n<span class=\"token keyword\">COPY</span> . .\n<span class=\"token keyword\">RUN</span> npm run build\n\n<span class=\"token comment\">#Nginx에 build 결과물 upload</span>\n<span class=\"token keyword\">FROM</span> nginx<span class=\"token punctuation\">:</span>1.17<span class=\"token punctuation\">-</span>alpine\n\n<span class=\"token keyword\">COPY</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>from=builder /build /usr/share/nginx/html\n\n<span class=\"token keyword\">EXPOSE</span> 80\n<span class=\"token keyword\">CMD</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-g\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"daemon off;\"</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">.dockerignore</code>의 경우 .gitignore와 같이 Docker build시 제외할 항목에 대하여 기술한다.</li>\n<li><code class=\"language-text\">Dockerfile</code>의 경우 node를 통해 build를 한 후 build된 결과물을 nginx에 복사한 후 Docker image를 만든다.</li>\n</ul>\n</li>\n<li>\n<p>GKE 배포</p>\n<p>배포하기에 앞서 우선적으로 GCP에 계정이 존재해야 하므로 GCP에 가입한다.<a href=\"https://console.cloud.google.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">(링크)</a></p>\n<ul>\n<li>가입 후 아래와 같이 새 프로젝트를 하나 생성한다.</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/104f7c4d4d668c8fdc44201b1b7671f9/4eb29/gke1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.576427255985266%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz52SS2tTQRiGz79yV8H/UBBF3HUnuJKASKnapbpqaU5Dk5ycexJEssrCxMSQExoQJHc3XsCdsY2R2pPb48wcE+uNgB+8zJwz3zzzft+MdmlTZ+P6IRvXDrl844grV+NsbcaIbd1h5/Zjth89J/akwv29Cg/2K+zsRXOl/Srbu8+4e8/j4e5Tbt6y0HQ9QTKVJpU2sB2Xo2SKRtCABUzCc9bGySfOPn6AryPeNI/RXMfBdR2y2Sz5fI5EQqf8osrpeM7n0YQTqS9TTn9oNR9H4+gMRt9gHMKr1x00y7IwDEPJF1A9Hqf6ss65SAiFw8ViwVxqHkl9z+dMJhNms5maz6ZTZbbVaqGZZgYp6TKXyxEXwHo94O2798JxnlqtpjZGoJnaOBwOKRQKlEqlFXQFTBk2ybSFaXk4Xo6DgzhBUFcJYRgyFadLmIyLo/wfrbECdjqi5HTGIWU4mPZPYKPR+KP3v0MvxhLY7qgemtiij57rqovRdV2UXP/n5r/FquR2G822bTIZE3k5vh8Blw7XAZfrv5RsmqYAZrAE2PM8dSlBEKiEZcPXSeapkqVD6cwSUEe8R9/3lcNms8n/xGAwQJPupCRQ9lA6LhaL9Pt9VcI6dbtd9Vx6vR7lcpnvUgJKJwcH8mwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"프로젝트생성\"\n        src=\"/static/104f7c4d4d668c8fdc44201b1b7671f9/799d3/gke1.png\"\n        srcset=\"/static/104f7c4d4d668c8fdc44201b1b7671f9/00d96/gke1.png 148w,\n/static/104f7c4d4d668c8fdc44201b1b7671f9/0b23c/gke1.png 295w,\n/static/104f7c4d4d668c8fdc44201b1b7671f9/799d3/gke1.png 590w,\n/static/104f7c4d4d668c8fdc44201b1b7671f9/2a3d6/gke1.png 885w,\n/static/104f7c4d4d668c8fdc44201b1b7671f9/4eb29/gke1.png 1086w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>우선적으로 해당 프로젝트에 접근권한을 설정하기 위하여 \"IAM 및 관리자\"-\"서비스 계정\"을 선택한다.</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 463px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e95561a78ecc492246938c0c44bf2c2b/97b7a/gke2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 148.16414686825055%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAEUElEQVRIx4VUTW8bVRSdv0AFG8S6UlcgKtEiVAQCCggBiwoJCSRgw0ckKhUElE+JBWyQoJsKiQ0sWERZlSahSaALkjQpNEFp89U0sWPHnrHHdmxP/DHj8cwc7nn2M5Npqo50fOd53jvv3PPufcajp00892kBJ86YOPmJhac+snDybAFPf2zhGRk//1lBjZ/80MSJD0p4fOga7n/oLcGbvfjgG3jg6Lt45O0bOHbahnH0vTyePWvh+PsmXvqyiNe+tdUGL3xewMtf9eKpr4t48QsLj50p4Ymhf3DfkVdxz+FXcK/EQ4dP4dCR13Hsnet4eEgIr607mF+p4+/VOq7cqGJ+ua7GjHPL/8e55RoWNxoY+yuNb85P4twvsyr+8PMMzv86j+9/uoTvfhyFAQSo2HmEfgsNp4y7PU61iMnfL2B2+g9MXvoNV6b/xNLiHP5dmMfM9CyMbjdEo9FCNwgVoggIBXxnDOUn0OjPqdWdAzfrdrswfN9HLpeD53nY2dlR4JjY3t6G67pqchiG6HQ6alG5XBYRDbiyhk9EFfK0220YnMhFjJwcBIGCfteTGQn+X61WFWmr1Rpsxsd1PRjc1TRNtXuhUEA2m0WxWFTqqJYZJBXyOwk5h2t3d3fVHGapFHInRi6mKv0eVzlQKP/XRGGFae/t7Uu5Q0IusixLsVNdPp9X4H8cE5qUCgOJFaYsqry++qh/KB0eCtXQYO0hQXWE9ibuoS+qMqurcGRDUYFI1hKSJjq1Wu+UqYiRqugbYyaTGXijyKhAFnozMygvLKB09SrSly+jLeTtlRW4GxtozEodxv056Bl850BS99fXYQlhQ2JLSHw5GCIQISQ26I9t22g2m8pHLtYHE99MgybYlQq6MQH6zZN1RrzO7qhOQzbxpGZtKZso5q9+OvJNeUi/WNysKfpH6KKNb6QPkN4SLHCiIoqZHatAKWTLME1Gpr4nJ6kLOu6vrlkSsLBJyrkk5XxFyJ/Nzc1BL7Ns4ikno+4skiRtUoQ6Da0wWXsHEZKMB1kqlQYpU3G9Xu95yB7mRN4wbCmO+TFJpn3id4qgAFpA//mt2Wz1FHLQ69/+bdPvmnhJaA99IaQ6zks+FGf4stDM9bzLiYed/h2nqPSBMAqBJ2SE4zgqRa8/V9vUu20yWan4FCK5BPy0VPx2BvwvEETZHchJQW4IiB8Ib95U7VeVniWpbs19Cr3F61hekx6t7sHMOLBzDgrZOsqmg6DRVE0v5iCiuqUltCXdmpQKCXX9aW/pqxFJH3q3bkFHIkinIdWOSKAjM4B8S62t4cLFi5iamlKYmJjYB4PWp2Uye7MsJWCJAjdxz0Wx961UCsPDwxgbG8Po6OhtMNiTLuuPN0nH1wXY69XYoWjjU1tbGBkZwfj4+IFQtw3vQ/rADtDlkLzWSEikRGGckEr3EcYLlwVKc+9EqFJOKLyNkPXHFiIRe5ldkLy+NCHV303hf1c9ptmc+Cx3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"서비스계정\"\n        src=\"/static/e95561a78ecc492246938c0c44bf2c2b/97b7a/gke2.png\"\n        srcset=\"/static/e95561a78ecc492246938c0c44bf2c2b/00d96/gke2.png 148w,\n/static/e95561a78ecc492246938c0c44bf2c2b/0b23c/gke2.png 295w,\n/static/e95561a78ecc492246938c0c44bf2c2b/97b7a/gke2.png 463w\"\n        sizes=\"(max-width: 463px) 100vw, 463px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 417px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42380951c1d25a02d3c21d9f2f6ee7a0/cc55b/gke3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 11.031175059952039%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAhElEQVQI1xWM0QqCMABF/f8fi7BCS7PCZKjMkeYUN2Xt4TQvnJd7uSdyztFJSd00THqkLCvU8MUHXJpgsoLpkqHPGWPgc7yhDlfmJMfHMSp8tdYsxrC7IkKmUPT9wLpapFTM60Yo4J5jqxbzENiXwDwFSyHo04rtXcMppmvDbi0/73cVf9R1lL5j0uZdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"서비스계정만들기\"\n        src=\"/static/42380951c1d25a02d3c21d9f2f6ee7a0/cc55b/gke3.png\"\n        srcset=\"/static/42380951c1d25a02d3c21d9f2f6ee7a0/00d96/gke3.png 148w,\n/static/42380951c1d25a02d3c21d9f2f6ee7a0/0b23c/gke3.png 295w,\n/static/42380951c1d25a02d3c21d9f2f6ee7a0/cc55b/gke3.png 417w\"\n        sizes=\"(max-width: 417px) 100vw, 417px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>상단의 \"서비스 계정 만들기\"를 선택하여 단계별로 진행하며 2단계에서는 아래와 같은 권한을 설정한다.(저장소 관리자의 경우 Storage 탭에 있다)</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 536px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2fa7069135ba086920dc7d604a2b8b1b/cab62/gke4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.18656716417911%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQoz5VSTWvcMBT0/y7tqZBDSducAymhPfXQ/9KUZFOyza5trb8kf8uSN7Y8GXu7EMJSqGB4MpbmzcyTZ41BkiRomhZxzFrX6K3BU9+jaRsURYH/WV6/30PmOYq6QqwUrq6v8ebdW7w/O8OHj+dYbx5R6xYt0RAqVyjLElVVQfF8JiXKqqagBtZaeEYVCFerBQ8/b/Dj21dcfv6Ey4sLfL/6AvH7Af69gL+KELIWmYShq/my1hpt20J3HUxnMAwDvJFE2e0thjDEuNuBbUEJwGyVKlwUo/dj5Pd/YB8DwA9OWh3HcYE3bjbwU4lU5UiIlERRmqFid8uOxyXrnrE8wQUhJn5P07TAObf8F0IgyzJ4+u4OCXMQQQBBlWmSYhcKRFQbRRFyKnajg+0BTdIpOCicyV7XGd5+vUbBHAwD75jFnMmx1gx6z6HNy00jb1FxeFCIv0QvSZcpO1reih1KWtUkeXEK49Ey91KV6BqzEJ5SGMfMma/F66lQtnqxndBeTXV6foOsOYfScprzlbJjjsUhw1OE88SXZ9P9uoFlmANh2cUyt571iI5ZOnZGxckrCWy3/7T8DAZu+KaQQv7UAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"권한설정\"\n        src=\"/static/2fa7069135ba086920dc7d604a2b8b1b/cab62/gke4.png\"\n        srcset=\"/static/2fa7069135ba086920dc7d604a2b8b1b/00d96/gke4.png 148w,\n/static/2fa7069135ba086920dc7d604a2b8b1b/0b23c/gke4.png 295w,\n/static/2fa7069135ba086920dc7d604a2b8b1b/cab62/gke4.png 536w\"\n        sizes=\"(max-width: 536px) 100vw, 536px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>생성 완료시 아래와 같이 키가 생성되며 해당 키를 클릭하여 상제 정보에 들어간다.</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a74fc0c6639f20368ba4936f0e58717/6248e/gke5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.534351145038167%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAATElEQVQI1x3DsQnAIBBA0Uxs7UhiNhDBUvubI4KNxxnJD8mDd6gqIQScc3jviWekXx19bqZOWmuMMfiICCklSin/nDO1VsyMtRZ7b16DPkS2loJK5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"서비스계정생성결과\"\n        src=\"/static/0a74fc0c6639f20368ba4936f0e58717/799d3/gke5.png\"\n        srcset=\"/static/0a74fc0c6639f20368ba4936f0e58717/00d96/gke5.png 148w,\n/static/0a74fc0c6639f20368ba4936f0e58717/0b23c/gke5.png 295w,\n/static/0a74fc0c6639f20368ba4936f0e58717/799d3/gke5.png 590w,\n/static/0a74fc0c6639f20368ba4936f0e58717/2a3d6/gke5.png 885w,\n/static/0a74fc0c6639f20368ba4936f0e58717/6248e/gke5.png 1048w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\"수정\"을 선택 후 \"키 만들기\"를 선택하여 JSON형태로 만들기를 선택 시 json파일이 다운로드된다. 이 파일의 경우 이후 단계에서 필요함으로 잘 기억해두자</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b93d9ee1415c4d545b18172d25c955c6/ef7d2/gke6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.27146814404432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQ4y5WUW0tbQRDH80nsVyloEHwptXkTRMS++RXsow9aEG0uJuZ2cuK55WZaolaob6UieVFzUSqo0GrVXIzGqNGTf2dWj21UaF34sXvm7P53dnZnbIlkGiMj7/CiowMvOzuRDgaRdjrx0fkBqicIWYkjHo8R8f/CZhgxhMNhuFwu+GZmoEWj0L1eGD4fVDkKRdWgaU+j63obhmHAFovFMDc3h6WlJWQyGXxZXsbK6iq+flvBZ7ItLCxgcXFR9Mz8/LyYx/DYsvGcdDoNmyRJ6Ovrg8PhwPDwMPibx2+HhrC7u4vz83OcnJygVqvh9PQUpmmi1Wq1wTZuuVwONnZ9YmIC4+Pv4aTYsaejo6OYmprC/v4+zs7OhBAL8pgXX11d4fr6Gs1mU/SXl5dCcH19/VZwcHAQ/f39GBgYwK/DQ/GzcXGBUrmMarUqPGQajYagVCqJDSqVitisTPNYfG1t7VYwFArB7/fD7fHg8OAAteMSGrSAtsdz2r2gHIkgTAR8XhxkczgubqP58wewt4cW7dyiyQ/j9jc3Nzd/BCU1iqAURIQuw0+C5e1tVHZ20Dw6gknHN8lL826RFXxLyGqWXQjq9HbkWQ2RiIqZgIQqHbVJQa/TBXAc+ZY5bvV6XfR4wts2QU2PQYroCIQUeH1hEWxulkf/4tGRdd2glEkIZhVF3NZzmmnSxnenLxTyJMiXIsuYpZQLBgLIZrPY2MiJN2VRKBTa2NzcxNbWForFIvL5PFGg7+9Ypiyz+akY9FJmvHa8waveXnR3d8Nutwu6urrQ09NDj34ck5OTIgH4wTNjY2OYnp6G2+0WeDxu8fxsKSoMmssNlYqDRhPY24dYic9w7jNsSyQSj6vNJ6oqmqxCCSvIcOkiY4qKRSqVuocXPiSZTD5p/w2ZSCZjZUKuYQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"키만들기\"\n        src=\"/static/b93d9ee1415c4d545b18172d25c955c6/799d3/gke6.png\"\n        srcset=\"/static/b93d9ee1415c4d545b18172d25c955c6/00d96/gke6.png 148w,\n/static/b93d9ee1415c4d545b18172d25c955c6/0b23c/gke6.png 295w,\n/static/b93d9ee1415c4d545b18172d25c955c6/799d3/gke6.png 590w,\n/static/b93d9ee1415c4d545b18172d25c955c6/ef7d2/gke6.png 722w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Docker의 경우 \"Container Registry\"에 보관될 것이므로 해당 탭을 선택 후 사용설정 버튼을 클릭한다.</li>\n<li>\"Kubernetes Engine\"탭을 선택하여 \"클러스터\"를 선택 후 \"클러스터 만들기\"를 진행한다.</li>\n<li>클러스터의 생성 시 아래와 같이 진행하며 이름의 경우 자유롭게 설정한다. 영역의 경우 <code class=\"language-text\">asia-northeast3-c</code>를 설정한다.(서울)</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 545px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ee067287e0d5a98d75e521f6c776e737/3af27/gke7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.4862385321101%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/UlEQVQ4y6VUCZKjMAz0/7+YmQkkYM7gg3AfvZKyZJLarZ2QdVUXYGOp1TqUMRVO4QlleUFVGcQ6QhxrTNOMd5ZqmgZlnsMYg6LIkRPSNIOlb0MOMjpL0gTWGnJY0XcB5xwSHYPJ8F5eZMiyDE3bQnnrEIQhbaT4/Djg6/iFkBiHQYDqUqHrOnR9R4wneW8J4ziipcu81/c9vTdyxvtqXVfUdY1lWQTzPD89d4c8zxMOhw8JmRcbYSeMzcm/wI555SSNtZYZLkJ9Y/QO2DmHLiFbVyOKE9ItuIe4MdyDe8hxNuDwmcBbcze2dz0aVpydqroI5f9lJwxZPx3HuF6v6If+KcOvYhiG230ipfiyNVZYco1ta49BTkZZlvDeQ7FVrnD2UNdeNrkTtrLZnRTW0DsPbkGueOedtNPeBN2Tsopmt1p8J8N/DgdquyzNEdGU4WZnk49JmcnRQt20LLcnO2bNtmaYxu89/l+1XStTpigKaK2RJBpRxCMsFugkRxAUOIYlTucClvRlx5aGCuvO7eZkz1CVDFDj2MNRUbOOV9Jx4fDHRxYrmm6ls4Wmzs+SqNL0OAYacXTG5XcyXu2Kv0FVbkaaW2E5TuPTRdFRnt/40eC6TjR9I0SnM2nhRZPyUorgr44w/o+7hSGd0kstOilqrkeuxS2Lr2DrFsYv4hxr1A+AP+EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"클러스터설정\"\n        src=\"/static/ee067287e0d5a98d75e521f6c776e737/3af27/gke7.png\"\n        srcset=\"/static/ee067287e0d5a98d75e521f6c776e737/00d96/gke7.png 148w,\n/static/ee067287e0d5a98d75e521f6c776e737/0b23c/gke7.png 295w,\n/static/ee067287e0d5a98d75e521f6c776e737/3af27/gke7.png 545w\"\n        sizes=\"(max-width: 545px) 100vw, 545px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>생성 완료 시 아래와 같이 이전 탭에 생성된 것을 볼 수 있다.</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1a8b70da59207200ebeac0b3c0df42c5/2928a/gke8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.996197718631176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6UlEQVQY0z2QiW7CMBBE8/9fWEoJR1WEgIQkvu21p7NuhaWnScbrWa+HZVnwfD4wzzOmaUIIAboeL8FqBNYKcmm4TwUxVYTYup+LIKUIEUFr7c0QY+QhC2sMvPdwzsHw2xjb1XHPO88a1/e0TjWETM0M1cCKVv8YHEOWbcNKNj3MBkpIqWvM+U0iuehNE6QCzIK0PhDaP0PhiH5ekdi5kEyajs2wxCaBT1LZNFKFN1NPtRJx9l3b4fhD/D7hZ/yA+fyCPR4RzmdshwPC5QJ/OvX/ervhtdsh0lv2e3h6cr2iEPW0ZqVvxxG/JgmBteyEA+gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"클러스터결과\"\n        src=\"/static/1a8b70da59207200ebeac0b3c0df42c5/799d3/gke8.png\"\n        srcset=\"/static/1a8b70da59207200ebeac0b3c0df42c5/00d96/gke8.png 148w,\n/static/1a8b70da59207200ebeac0b3c0df42c5/0b23c/gke8.png 295w,\n/static/1a8b70da59207200ebeac0b3c0df42c5/799d3/gke8.png 590w,\n/static/1a8b70da59207200ebeac0b3c0df42c5/2928a/gke8.png 789w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이것으로 자동배포를 위한 기본적인 GCP 설정을 완료하였다. 마지막으로 GitHub 저장소에 Action 수행 시 사용할 key값들을 설정해 주면 된다.</p>\n</li>\n<li>\n<p>GitHub Secrets 값 설정</p>\n<p>해당 항목의 경우 Github 저장소의 <code class=\"language-text\">Settings-Secrets</code>에 존재하며 'Add a new secret'를 선택하여 입력 가능하다.</p>\n<p>등록해야할 키의 종류는 아래와 같다.</p>\n<table>\n<thead>\n<tr>\n<th>Key</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DEPLOYMENT_NAME</td>\n<td>동적으로 생성할 deployment 이름으로 <code class=\"language-text\">GCP-Kubernetes Engine-작업부하</code>에 생성된다.</td>\n</tr>\n<tr>\n<td>GKE_CLUSTER</td>\n<td>위에서 생성한 클러스터 이름을 입력한다.</td>\n</tr>\n<tr>\n<td>GKE_EMAIL</td>\n<td>서비스 계정에서 생성된 email포함 풀 텍스트를 입력한다.</td>\n</tr>\n<tr>\n<td>GKE_KEY</td>\n<td>서비스 계정 만들기에서 다운로드한 json파일 내용을 전부 복사 후 붙여넣기</td>\n</tr>\n<tr>\n<td>GKE_PROJECT</td>\n<td>GCP에 생성한 프로젝트 이름을 입력한다.</td>\n</tr>\n<tr>\n<td>GKE_ZONE</td>\n<td>클러스터에서 생성한 영역의 이름을 입력한다.</td>\n</tr>\n<tr>\n<td>IMAGE</td>\n<td>Docker image 이름으로 자유롭게 입력한다.</td>\n</tr>\n<tr>\n<td>REGISTRY_HOSTNAME</td>\n<td>gcr.io, us.gcr.io, eu.gcr.io, <a href=\"http://asia.gcr.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">asia.gcr.io</a> 중 1개를 선택하여 입력한다.</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>이렇게 등록된 키들이 이전에 생성한 <code class=\"language-text\">google.yml</code>에서 <code class=\"language-text\">${{ secrets.GKE_PROJECT }}</code>형태로 사용되게 된다.</li>\n</ul>\n</li>\n<li>\n<p>kustomization 설정파일 생성하기</p>\n<p>이 부분에대해서 찾느라 많은 시간을 소요했던 것 같다. GKE의 경우 Github Action에 템플릿이 존재하는데 해당 템플릿을 실행 시 kustomization.yaml파일이 존재해야 한다.</p>\n<ul>\n<li>아래 파일들을 프로젝트에 다음과 같이 생성한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">#kustomization.yaml</span>\n<span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./k8s/deployment.yaml\n    <span class=\"token punctuation\">-</span> ./k8s/service.yaml</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">#./k8s/deployment.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>nginx<span class=\"token punctuation\">-</span>deployment <span class=\"token comment\">#deployment 이름으로 위의 Secrets에 입력한 값과 동일하게 맞춘다.</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#자유롭게 설정</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#자유롭게 설정</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#자유롭게 설정</span>\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> gcr.io/yapp16<span class=\"token punctuation\">-</span>findzone/react<span class=\"token punctuation\">-</span>test<span class=\"token punctuation\">:</span>latest <span class=\"token comment\">#image 위치로 추후 동적으로 변경하나 프로젝트-이미지 이름으로 미리 설정해준다.</span>\n          <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">#./k8s/service.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#Kubernetes Engine-서비스 및 수신에 생성될 이름이다.</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#자유롭게 설정</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"80\"</span>\n      <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n      <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> react<span class=\"token punctuation\">-</span>test <span class=\"token comment\">#deployment에서 containers.name과 동일하게 설정한다.</span>\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> LoadBalancer</code></pre></div>\n</li>\n<li>\n<p>브랜치 merge하기</p>\n<p>이제 모든 설정은 완료되었다. master 브랜치에 pull request가 완료 시 GKE를 만들고 배포가 될 것이다.</p>\n<ul>\n<li>만약, master 브랜치에 pull request가 완료 되고 성공적으로 GitHub Action이 수행 될 시 아래와 같이 설정한 이름으로 deployment, service가 생성되고 <code class=\"language-text\">서비스 및 인그레스</code>의 엔드포인트를 통해서 접근할 수 있다!✌</li>\n</ul>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6f95c8e357b1ea1f7f7123fd2737040/dbdb8/gke9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.320954907161806%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+ElEQVQY032QUUvDMBSF+///h8jenDB8cTCmThD7suF0rpu2opWxde3Spmma9DMtDEXQAwe+hHPPDfGKoiD+iJGlotU+q8kL486WeKMxxpJlGQ3faprmT3taa3RVonVJXauOpZTOJcotabldenSlq/8LpQuFbwmr1y0vUeJ4R5LsSdOUzDnPBUKI7pXicEApxU811nZF1hisY0+4witfMBgLhncK/9FiXTDPc0o3XLugsbYbPrKua/clElVV/Jb37vs8XY+5PD3h/mLA7fkZD6MR2+CZJFgi1ms28zkyitgtFhRhSBYExNNpd/c5mzHs9bjp91lOJnwBeMR8TFuAh3IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"동적생성결과1\"\n        src=\"/static/f6f95c8e357b1ea1f7f7123fd2737040/799d3/gke9.png\"\n        srcset=\"/static/f6f95c8e357b1ea1f7f7123fd2737040/00d96/gke9.png 148w,\n/static/f6f95c8e357b1ea1f7f7123fd2737040/0b23c/gke9.png 295w,\n/static/f6f95c8e357b1ea1f7f7123fd2737040/799d3/gke9.png 590w,\n/static/f6f95c8e357b1ea1f7f7123fd2737040/dbdb8/gke9.png 754w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p> <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1689772734b38c1da93401861c442e62/a0800/gke10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.342007434944236%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABG0lEQVQY031QTUvDQBTM//8J4qH0UEHEm0Go6Kl4kFYsLdKStvbSptmPfOlmP7IZX1I9SNUHw3u7OzPM20DrCpxzZGlGncEYDec8ZGqgKo+iKFCWJZRS9Ga6s3MObTVNc4IgLyzixEGkDuVHg9o30GT6X7VC7/2vCJTSEEKCMQYuBCShnYWUdC/AGT922qLjULfW/p3Qak1Eid0uwX7PEMccSZJ0RlmaIjkcOkNBRu1c5EWX5MsRzXe6uu4QVFZjsjC4fdR4mDg8vWpYImhnoayBI9GPdQk1wZDY+PrkO4J4OsXz8A7XZ+e4v7zC23iMbL3C+2YDuVjiMJthOBgg7PexHI1Qbbco12uw+Rz5KkIeRbjp9YhzgZcwxCejRseoYA9FQgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alternate text\"\n        title=\"동적생성결과2\"\n        src=\"/static/1689772734b38c1da93401861c442e62/799d3/gke10.png\"\n        srcset=\"/static/1689772734b38c1da93401861c442e62/00d96/gke10.png 148w,\n/static/1689772734b38c1da93401861c442e62/0b23c/gke10.png 295w,\n/static/1689772734b38c1da93401861c442e62/799d3/gke10.png 590w,\n/static/1689772734b38c1da93401861c442e62/a0800/gke10.png 807w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</li>\n</ol>\n<p>참고</p>\n<ul>\n<li><a href=\"https://www.npmjs.com/package/husky\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Git Hook(husky) 라이브러리</a></li>\n<li><a href=\"https://cloud.google.com/kubernetes-engine/docs/tutorials/hello-app?hl=ko\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google 컨테이너식 웹 애플리케이션 배포</a></li>\n<li><a href=\"https://kubernetes.io/ko/docs/tasks/manage-kubernetes-objects/kustomization/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kustomize를 이용한 쿠버네티스 오브젝트의 선언형 관리</a></li>\n</ul>","excerpt":"Github action + Docker + GKE를 사용하여 클라우드 배포하기 현재 진행하고 있는 동아리 활동에서 프로젝트 초기환경 구축을 하게 되었다. 이에 대하여 CI/CD…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/React-CICD.md/#github-action--docker--gke%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">Github action + Docker + GKE를 사용하여 클라우드 배포하기</a></p>\n<ul>\n<li><a href=\"/React-CICD.md/#%EC%82%AC%EC%9A%A9-%EA%B8%B0%EC%88%A0\">사용 기술</a></li>\n<li><a href=\"/React-CICD.md/#%EB%B0%B0%ED%8F%AC-%ED%9D%90%EB%A6%84%EB%8F%84\">배포 흐름도</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/React-CICD.md/#%EC%8B%A4%EC%A0%9C%EB%A1%9C-cicd%EB%A5%BC-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\">실제로 CI/CD를 만들어보자!</a></p>\n<ul>\n<li><a href=\"/React-CICD.md/#reactjs-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%A4%80%EB%B9%84%ED%95%98%EA%B8%B0\">React.js 프로젝트 준비하기</a></li>\n<li><a href=\"/React-CICD.md/#jest-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">Jest 설정하기</a></li>\n<li><a href=\"/React-CICD.md/#git-hook-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">Git Hook 설정하기</a></li>\n<li><a href=\"/React-CICD.md/#github-action-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">Github Action 설정하기</a></li>\n<li><a href=\"/React-CICD.md/#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C%EC%97%90-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">클라우드에 배포하기</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/React-CICD.md/"},"frontmatter":{"title":"React.js CI/CD 구축하기","date":"Apr 07, 2020","tags":["React.js","CI/CD"],"keywords":["React.js","Git Hook","husky","Github Action","Docker","Google Cloud Platform","Kubernetes"]}}},"pageContext":{"slug":"/React-CICD.md/","series":[]}}}